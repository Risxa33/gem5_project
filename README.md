# gem5_project
## *Αθανασιάδης Χαράλαμπος*

## **Ερώτημα 1**

### Βασικά χαρακτηριστικά του συστήματος με βάση το αρχείο starter_se.py:

- Voltage domain: 3.3V
- Clock domain: 1GHz
- Private L1 cache
- Shared L2 cache
- Model of CPU: Atomic
- Number of cores: 1
- Number of memory channels: 2
- Memory type: DDR3_1600_8x8
- Number of memory ranks per channel: none
- Physical memory size: 2GB

### Πώς θα μπορούσατε να αλλάξετε τη συχνότητα λειτουργίας του συστήματος;

Ένας τροπος να αλλάξουμε την συχνότητα λειτουργείας του συστήματος είναι αλλάζοντας τον αριθμό μέσα στην εντολή self.clk.domain 
που είναι μεσα στο class SimpleSeSystem (System), η οποία κλάσση βρίσκεται στο αρχείο starter_se.py. 

## **Ερώτημα 2**

### Τα πιο σημαντικά στοιχεία είναι τα sim_seconds, sim_insts και host_inst_rate. Τι μέτρηση παρουσιάζει το καθένα από αυτά?

- sim_seconds: Number of seconds simulated : 0.000035
- sim_insts: Number of instructions simulated : 5027 
- host_inst_rate: Simulator instruction rate (inst/s) : 32824

## **Ερώτημα 3**

### Χρησιμοποιήστε τις αντίστοιχες παραμέτρους από τα config και stats αρχεία και υπολογίστε το CPI σύμφωνα με την εξίσωση: 𝐶𝑃𝐼 = 1 + ((𝐼𝐿1. 𝑚𝑖𝑠𝑠_𝑛𝑢𝑚 + 𝐷𝐿1. 𝑚𝑖𝑠𝑠_𝑛𝑢𝑚) × 6 + 𝐿2. 𝑚𝑖𝑠𝑠_𝑛𝑢𝑚 × 50) / Total_inst_num

Σύμφωνα με τα στοιχεία των παραπάνω αρχείων έχουμε τα παρακάτω αποτελέσματα:
- **overall misses L2: 474**
- **icache overall misses: 327**
- **dcache overall misses: 177**
- **total inst num: 5027**

- **CPI = 6,3160931**

## **Ερώτημα 4**

### Aναζητήστε πληροφορίες για τα διαφορετικά μοντέλα in-order CPUs που χρησιμοποιεί ο gem5 και παραθέστε μια συνοπτική παράγραφο για καθένα από αυτά.

## Simple CPU model: 

Το Simple CPU model είναι ένα λειτουργικό in-order μοντέλο το οποίο χρησιμοποιείται σε κυρίως 
μη απαιτητικές περιπτώσεις, όπως για παράδειγμα warm-up περιόδους, για δοκιμές προγραμμάτων ή 
και για χρήστες που χρησιμοποιούν κάποιο host κεντρικό υπολογιστή. Τέλος το Simple CPU μοντέλο 
έχει τρεις υποκατηγορίες, την Base Simple CPU, Atomic Simple CPU και Timing Simple CPU. 

## Base Simple CPU model:

Το Base Simple CPU model διατηρεί την αρχιτεκτονική κατάσταση, καθορίζει λειτουργίες για τον 
έλεγχο διακοπών, ρυθμίζει τα fetch αιτήματα καθώς και χειρίζεται post-execute και pre-execute
ενέργειες, καθώς και την προώθηση του υπολογιστή στην επόμενη εντολή. Τέλος δεν μπορεί να 
εκτελεστεί μόνο του αλλά χρειάζεται και ένα από τα Atomic Simple CPU model ή Timing Simple
CPU model.

## Atomic Simple CPU model:

Tο Atomic Simple CPU model χρησιμοποιεί προσβάσεις ατομικής μνήμης. Επίσης κάνει εκτίμηση του 
συνολικόυ χρόνου πρόσβασης στην κρυφή μνημη, χρησιμοποιώντας τις εκτιμήσεις λανθάνοντος χρόνου
από τις ατομικές προσβάσεις. Ακόμα υλοποιεί λειτουργείες όσον αφορά την ανάγνωση και εγγραφή μνήμης, 
καθώς και για την επιλογή που καθορίζει τι συμβαίνει σε κάθε κύκλο της CPU. Τέλος ορίζει την θλυρα 
που χρησιμοποιείται για την σύνδεση στη μνήμη και συνδέει τη CPU με τη cache μνημη.

## Timing Simple CPU model:

To Timing Simple CPU model χρησιμοποιεί προσβάσεις στη μνήμη χρονισμού. Σταματά στις προσβάσεις της 
cache μνήμης και περιμένει την ανταπόκρισητου συστήματος μνήμης για να προχωρήσει. Επίσης καθορίζει
και αυτο τη θύρα για την σύνδεση της CPU με την cache και ορίζει τις απαραίτητες λειτουργίες για το 
χειρισμό της απόκρισης από τη μνήμη στις προσβάσεις που αποστέλονται.

## Minor CPU model;

To Minor CPU model έχει σταθερή διοχέτευση αλλά διαμοργώσιμες δομές δεδομένων και συμπεριφορά 
εκτέλεσης. Χρησιμοποιείται σε μοντελοποίηση επεξεργαστών με in-order συμπεριφορά εκτέλεσης και 
επιτρέπει την οπτικοποίηση της θέσης μιας εντολής στη διοχέτευση μέσω του 
MinorTrace/minorview.py format/tool. Σκοπός του ειναι ο συσχετισμός ενός μικροαρχιτεκτονικού
μοντέλου με έναν άλλον επεξεργαστή με παρόμοιες δυνατότητες.


## **Ερώτημα 4(a)**

### Γράψτε ένα πρόγραμμα σε C και εκτελέστε το στον gem5 χρησιμοποιώντας διαφορετικά μοντέλα CPU και κρατώντας όλες τις άλλες παραμέτρους ίδιες. Χρησιμοποιήστε τα TimingSimpleCPU και MinorCPU.

Το πρόγραμμα μου παίρνει τρεις αριθμούς και υπολογίζει το άθροισμα τους καθώς και την μέση τιμή τους.

....

#include <stdio.h>
#include <stdlib.h>

int main()
{
    //δηλωσεις μεταβλητων
    double athroisma, mean, a1=25, a2=586, a3=2003;

    // υπολογισμος αθροισματος και αντιστοιχηση μεταβλητης
    athroisma= a1 + a2 + a3;

    //υπολογισμος μεσου ορου και αντιστοιχηση μεταβλητης
    mean= (a1 + a2 +a3) / 3;

    //εκτύπωση αποτελεσμάτων
    printf("Sum is: %f,mean is: %f \n", athroisma, mean);

    return 0;
}

....

Statistics based on the CPU model:

Sim_seconds with **Minor CPU model** : 0.000060

Sim_seconds with **TimingSimple CPU model** : 0.000081

Βλέπουμε ότι υπάρχει αισθητή διαφορά στα αποτελέσματα με το Minor CPU model να ειναι αρκετά πιο γρήγορος από το TimingSimple CPU model. Αυτό γίνεται λόγο της διοχέτευσης που χρησιμοποιεί το πρώτο μοντέλο.



## **Ερώτημα 4(b)**

### Δοκιμάστε να αλλάξετε την συχνότητα λειτουργίας και τη τεχνολογία της μνήμης που χρησιμοποιείται. Παραθέστε και δικαιολογήσετε τα αποτελέσματα που παρατηρήσατε.

*CPU clock freq (2GHz): 

**Minor CPU model:
- program exits @ tick 48077000 
- sim_sec = 0.000060

**TimingSimple CPU model:
- program exits @ tick 56709000
- sim_sec = 0.000057

*CPU freq (1GHz):

**Minor CPU model:
- program exits @ tick 59816000
- sim_sec = 0.000060 

**TimingSimple CPU model:
- program exits @ tick 81302000
- sim_sec = 0.000057

*Mem_type : DDR3_1600_8x8

**Minor CPU model:
- sim_sec = 0.000059

**TimingSimple CPU model:
- sim_sec = 0.000052

*Mem_type : DDR4_2400_8x8

**Minor CPU model: 
- sim_sec = 0.000059

**TimingSimple CPU model:
- sim_sec = 0.000052

### Ποιο CPU model έχει μεγαλύτερη ευαισθησία στην αλλαγή της συχνότητας λειτουργίας? Γιατί συμβαίνει αυτό?

Παρατηρούμε ότι το TimingSimple CPU model επιρεάζεται σε αρκετά μεγαλύτερο βαθμό σε σχέση με το Minor CPU model όσον αφορά την αλλαγή συχνότητας. Από τα νούμερα βλέπουμε ότι αλλάζοντας την συχνότητα απο 2GHz σε 1GHz το πρόγραμμα κάνει έξοδο σε σχεδόν το διπλάσιο αριθμό tick. βέβαια και στις δύο περιπτώσεις παρατηρούμε μείωση των tick όταν αυξάνεται η συχνότητα και αυτο συμβαίνει γιατί ο επεξεργαστής εκτελεί λιγότερες εντολές.


### Ποιο CPU model έχει μεγαλύτερη ευαισθησία στην αλλαγή της τεχνολογίας της μνήμης που χρησιμοποιείται? Γιατί συμβαίνει αυτό?

Χρησιμοποίησα δύο διαφορετικές τεχνολογίες στην μνήμη παρόλα αυτά δεν παρατήρησα κάποια αλλαγή στην αποδοτικότητα των CPU μοντέλων. Αυτό το αποτέλεσμα μπορεί ίσως να αποδείδεται στο ότι το πρόγραμμα μου ήταν αρκέτα απλό.

## Κριτική εργασίας

Έμεινα αρκέτα ευχαριστημένος με το συγκεκριμένο project καθώς με έφερε σε επαφή με τον gem5, και έμαθα αρκέτα πράγματα για την συμπεριφορά μερικών CPU models, μεγάλωσα την εμπειρία μου όσον αφορά την χρήση Linux και γενικότερα διέυρυνα τις γνώσεις μου πανω στο κομμάτι της αρχιτεκτονικής υπολογιστών. Το μόνο παράπονο που ίσωσ να έχω ειναι ότι οι οδηγίες που σχετίζονται για το πως μπορώ να τρέξω το προγραμμά μου στο terminal και σε ποιο directory επρεπε να το κανω δεν ηταν αρκετες.

## Πηγές
[Gem5 Documentation](https://www.gem5.org)











